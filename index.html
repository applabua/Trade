<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–∫–∞–ª—å–ø–∏–Ω–≥–æ–≤—ã–π —Ç–æ—Ä–≥–æ–≤—ã–π –±–æ—Ç</title>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; }
        #chart-container { display: flex; justify-content: space-around; }
        .chart { width: 45%; height: 400px; border: 1px solid #ccc; }
        .signals { margin-top: 20px; font-size: 18px; }
    </style>
</head>
<body>
    <h1>–°–∫–∞–ª—å–ø–∏–Ω–≥–æ–≤—ã–π —Ç–æ—Ä–≥–æ–≤—ã–π –±–æ—Ç</h1>
    <div id="chart-container">
        <div id="chart-1m" class="chart"></div>
        <div id="chart-5m" class="chart"></div>
    </div>
    <div class="signals">
        <p><strong>–°–∏–≥–Ω–∞–ª:</strong> <span id="trade-signal">–û–∂–∏–¥–∞–Ω–∏–µ...</span></p>
        <p><strong>–¢–µ–π–∫ –ü—Ä–æ—Ñ–∏—Ç:</strong> <span id="take-profit">---</span></p>
        <p><strong>–°—Ç–æ–ø –õ–æ—Å—Å:</strong> <span id="stop-loss">---</span></p>
        <p><strong>–ü–∞—Ç—Ç–µ—Ä–Ω:</strong> <span id="pattern-info">---</span></p>
        <p><strong>–ü—Ä–æ–≥–Ω–æ–∑ (5 –º–∏–Ω—É—Ç):</strong> <span id="prediction">---</span></p>
    </div>

    <script>
        function loadTradingViewChart(containerId, interval) {
            new TradingView.widget({
                "container_id": containerId,
                "width": "100%",
                "height": "400px",
                "symbol": "BINANCE:BTCUSDT",
                "interval": interval,
                "timezone": "Etc/UTC",
                "theme": "light",
                "style": "1",
                "locale": "ru",
                "toolbar_bg": "#f1f3f6",
                "enable_publishing": false,
                "hide_top_toolbar": true,
                "hide_side_toolbar": false,
                "allow_symbol_change": false,
                "save_image": false,
                "studies": ["MASimple@tv-basicstudies", "RSI@tv-basicstudies", "MACD@tv-basicstudies"]
            });
        }

        document.addEventListener("DOMContentLoaded", function() {
            loadTradingViewChart("chart-1m", "1");
            loadTradingViewChart("chart-5m", "5");
            fetchTradeSignals();
            setInterval(fetchTradeSignals, 60000); // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
        });

        function fetchTradeSignals() {
            axios.get("https://api.binance.com/api/v3/ticker/price", { params: { symbol: "BTCUSDT" } })
                .then(response => {
                    let price = parseFloat(response.data.price);
                    let signal = analyzeMarket(price);
                    document.getElementById("trade-signal").innerText = signal.signal;
                    document.getElementById("take-profit").innerText = signal.takeProfit;
                    document.getElementById("stop-loss").innerText = signal.stopLoss;
                    document.getElementById("pattern-info").innerText = signal.pattern;
                    document.getElementById("prediction").innerText = predictPrice(price);
                })
                .catch(error => console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö Binance", error));
        }

        function analyzeMarket(price) {
            let signal = "–û–∂–∏–¥–∞–Ω–∏–µ...";
            let takeProfit = "---";
            let stopLoss = "---";
            let pattern = "–ù–µ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω–∞";

            let supportLevel = price - (price * 0.005);
            let resistanceLevel = price + (price * 0.005);

            if (price < supportLevel) {
                signal = "üîº –õ–û–ù–ì";
                takeProfit = (price * 1.01).toFixed(2);
                stopLoss = (price * 0.99).toFixed(2);
                pattern = "–î–≤–æ–π–Ω–æ–µ –¥–Ω–æ";
            } else if (price > resistanceLevel) {
                signal = "üîΩ –®–û–†–¢";
                takeProfit = (price * 0.99).toFixed(2);
                stopLoss = (price * 1.01).toFixed(2);
                pattern = "–ì–æ–ª–æ–≤–∞ –∏ –ø–ª–µ—á–∏";
            }

            return { signal, takeProfit, stopLoss, pattern };
        }

        function predictPrice(price) {
            let prediction = (price * (1 + (Math.random() * 0.002 - 0.001))).toFixed(2);
            return `–ü—Ä–æ–≥–Ω–æ–∑ —á–µ—Ä–µ–∑ 5 –º–∏–Ω: ${prediction} USDT`;
        }
    </script>
</body>
</html>
